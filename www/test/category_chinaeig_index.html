{template "content","header_chinaeig"}

<div class="first_col">
	<div class="slogan">
        <img src="{IMG_PATH}chinaeig/slogan.jpg" alt="" />
	</div>
	<div class="slider" id="slider">
		<ul class="list hor_list" style="width:99999px">
            {pc:content action="lists" catdir="eignews" thumb="1" order="updatetime DESC" num="4"}
            {loop $data $val}
            <li><a target="_blank" href="{$domain}{$val['id']}.shtml"><img src="{$val['thumb']}" alt="" width="622" height="356" /></a></li>
            {/loop}
            {/pc}
		</ul>
		<ul class="count">
			<li class="current">1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
		</ul>
	</div>
</div>

<div class="hor_box cont">
	<div class="hor_item main">
		<div class="box">
			<div class="bt">
				<a href="{$domain}eigtrade">授权交易商信息</a>
			</div>
			<div class="bc">
				<ul class="pic_list justify_list">
                {pc:content action="lists" catdir="eigtrade" thumb="1" order="updatetime DESC" num="4"}
                {loop $data $val}
                <li>
                    <a target="_blank" href="{$domain}{$val['id']}.shtml"><img src="{$val['thumb']}" alt="" width="146" height="129" /></a>
                    <p style="text-align:center">{str_cut(htmlspecialchars($val['title']),8)}</p>
                </li>
                {/loop}
                {/pc}
				</ul>
			</div>
			<div class="extra">
				<a class="hot">上海</a>
				<a>北京</a>
				<a>浙江</a>
				<a>福建</a>
				<a class="hot">河南</a>
				<a>广东</a>
				<a>海南</a>
				<a>四川</a>
				<a>山东</a>
				<a>天津</a>
				<a class="more">更多</a>
			</div>
		</div>
	</div>
	<div class="hor_item side">
		<div class="box">
			<div class="bt">
				<a href="{$domain}eigmember" class="red">会员服务</a>
			</div>
			<div class="bc">
				<ul class="text_list vip_ser">
                {pc:content action="lists" catdir="eigmember" order="inputtime ASC" num="5"}
                {loop $data $val}
                <li><a target="_blank" href="{$domain}{$val['id']}.shtml">{str_cut(htmlspecialchars($val['title']),14)}</a></li>
                {/loop}
                {/pc}

				</ul>
			</div>
		</div>
	</div>
</div>
<div class="hor_box cont">
	<div class="hor_item main">
		<div class="box">
			<div class="bt">
				<a href="{$domain}eigtutorial">能源教程</a>
			</div>
			<div class="bc hor_box tutorial">
				<div class="hor_item video">
                {pc:content action="lists" catdir="eigtutorial" thumb="1" order="updatetime DESC" num="1"}
                {loop $data $val}
				{php $id[] = $val['id']}
                <a target="_blank" href="{$domain}{$val['id']}.shtml"><img src="{$val['thumb']}" alt="{$val['title']}" width="176" height="132" /></a>
                {/loop}
                {/pc}
				</div>
				<ul class="hor_item text_list justify_list">

					{php if(!empty($id)) $ids=implode(',', $id)}
                    {pc:content action="lists" catdir="eigtutorial" filter="$ids" order="updatetime DESC" num="10"}
                    {loop $data $val}
                    <li><a target="_blank" href="{$domain}{$val['id']}.shtml">{str_cut(htmlspecialchars($val['title']),12)}</a></li>
                    {/loop}
                    {/pc}
				</ul>
			</div>
			<div class="extra">
				<a target="_blank" href="{$domain}eigtutorial" class="more">更多</a>
			</div>
		</div>
	</div>
	<div class="hor_item side">
		<div class="box">
			<div class="bt">
				<a target="_blank" href="{$domain}eignotice">最新公告</a>
			</div>
			<div class="bc">
				<ul class="text_list notice">
                    {pc:content action="lists" catdir="eignotice" order="updatetime DESC" num="5"}
                    {loop $data $val}
                    <li><a href="{$domain}{$val['id']}.shtml">{str_cut(htmlspecialchars($val['title']),14)}</a></li>
                    {/loop}
                    {/pc}
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="hor_box cont">
	<div class="hor_item main">
		<div class="box">
			<div class="bt">
				<a target="_blank" href="javascript:;">合作伙伴</a>
			</div>
			<div class="bc">
                    {pc:block pos="chinaeig_partner"}{/pc}
			</div>
			<div class="extra">
                <!--
				<a href="#" class="more">更多</a>
                -->
			</div>
		</div>
	</div>
	<div class="hor_item side">
		<div class="box">
			<div class="bt">
				<a target="_blank" href="{$domain}eignews">最新动态</a>
			</div>
			<div class="bc">
				<ul class="text_list news">
                    {pc:content action="lists" catdir="eignews" order="updatetime DESC" num="6"}
                    {loop $data $val}
                    <li><a target="_blank" href="{$domain}{$val['id']}.shtml">{str_cut(htmlspecialchars($val['title']),14)}</a></li>
                    {/loop}
                    {/pc}
				</ul>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	var EventUtil = {
		addHandler : function(elem,type,fn){
			if(elem.addEventListener){
				return elem.addEventListener(type,fn,false);
				}else{
				!arguments.callee.count && (arguments.callee.count = 0);
				typeof(fn._id) === "undefined" && (fn._id = arguments.callee.count++);
				!elem["event_" + type] && (elem["event_" + type] = {});
				elem["event_" + type][fn._id] = fn;
				elem["on" + type] = function(){
					for(var i in this["event_" + type]){
						this["event_" + type][i].call(this);
					}
				}
			}
		},
		removeHandler : function(elem,type,fn){
			if(elem.addEventListener){
				elem.removeEventListener(type,fn,false);
				}else{
				elem["event_" + type] && (delete elem["event_" + type][fn._id]);
			}
		},
		bind : function(fn,context){
			var _args = Array.prototype.slice.call(arguments,2);
			!arguments.callee.count && (arguments.callee.count = 0);
			typeof(fn._fid) === "undefined" && (fn._fid = arguments.callee.count++);
			if(!context["bind_" + fn._fid]){
				context["bind_" + fn._fid] = function(){
					var innerArgs = Array.prototype.slice.call(arguments);
					var finalArgs = _args.concat(innerArgs);
					return fn.apply(context,finalArgs);
				}
			}
			return context["bind_" + fn._fid];
		},
		unbind : function(fn,context){
			return context["bind_" + fn._fid];
		},
		ready : function(fn){
			this.addHandler(window,"load",fn);
		},
		mouseWheel : function(fn){
			var roll = function(){
				var delta = 0;
				e = arguments[0] || window.event;
				delta = (e.wheelDelta) ? e.wheelDelta / 120 : -(e.detail || 0) / 3;
				fn(delta);
			}
			this.addHandler(document,"mousewheel",roll);
			this.addHandler(document,"DOMMouseScroll",roll);
		},
		stopPropagation : function(e){
			e = e || window.event;
			e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;
			return false;
		},
		preventDefault : function(e){
			e = e || window.event;
			e.preventDefault ? e.preventDefault() : e.returnValue = false;
			return false;
		}
	};

	var $ = {
		byId : function(id){
			return typeof(id) === "string" ? document.getElementById(id) : id;	   
		},
		byClass : function(sClass,node){
			var aTemp = [];
			var r = new RegExp("(^| )" + sClass + "( |$)");
			var elems = this.byTag("*",node);
			for(var i = 0;i < elems.length; i++){
				r.test(elems[i].className) && aTemp.push(elems[i]);
			}
			return aTemp;
		},
		byTag : function(tag,node){
			return (node || document).getElementsByTagName(tag);
		}
	}

	EventUtil.ready(function(){
		var oBox   = $.byId("slider");
		var aImg   = $.byTag("img",oBox);
		var oUl    = $.byTag("ul",oBox)[0];
		var bOrder = on     = true;
		var timer  = player = aBtn  = null;
		var index  = 0;
		var oCount = document.createElement("ul");
        if(!aImg.length){return}
		+function(){
			var aLi = '<li class="current">1</li>';
			for(var i = 1; i < aImg.length; i++){
				aLi += "<li>" + (i + 1) + "</li>"
			}
			oCount.innerHTML = aLi;
			oCount.className = "count";
			oBox.appendChild(oCount);
			aBtn = $.byTag("li",oCount);
			aBtn.cur = aBtn[0];
			for(i = 0; i < aBtn.length; i++){
				aBtn[i].index = i;
				EventUtil.addHandler(aBtn[i],"click",function(){
					index = this.index;
					cutover();
				});
			}
		}();

		function startMove(iTarget){
			clearInterval(player);
			player = setInterval(function(){
				move(iTarget);
			},30);
		}

		function next(){
			bOrder ? index++ : index--;
			index <=0 && (index = 0,bOrder = true);
			index >= aImg.length -1 && (index = aImg.length - 1,bOrder = false);
			cutover();
		}

		timer = setInterval(function(){
			next();
		},3000);

		EventUtil.addHandler(oBox,"mouseover",function(){
			clearInterval(timer);
		});
		EventUtil.addHandler(oBox,"mouseout",function(){
			timer = setInterval(next,3000);
		});
		function cutover(){
			aBtn.cur.className = "";
			aBtn[index].className = "current";
			aBtn.cur = aBtn[index];
			startMove(-index * aImg[0].offsetWidth);
		}

		function move(iTarget){
			var iSpeed = (iTarget - oUl.offsetLeft) / 10;
			iSpeed = iSpeed > 0 ? Math.ceil(iSpeed) : Math.floor(iSpeed);
			iTarget == oUl.offsetLeft ? clearInterval(player) : oUl.style.left = oUl.offsetLeft + iSpeed + "px";
		}


	});
</script>

{template "content","footer_chinaeig"}
